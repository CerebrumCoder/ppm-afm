{% extends "base.html" %}

{% block title %}Ubah Password - PPM AFM{% endblock %}

{% block content %}
<div class="flex items-center justify-center py-10">
  <div class="w-full max-w-sm rounded-3xl border border-slate-200 bg-white p-6 shadow-sm
              dark:border-slate-700 dark:bg-[#050b16]">
    <h1 class="mb-1 text-lg font-semibold text-center text-slate-900 dark:text-slate-50">
      Ubah Password
    </h1>
    <p class="mb-4 text-xs text-center text-slate-600 dark:text-slate-300">
      Pastikan password baru mudah diingat namun sulit ditebak.
    </p>

    {% if messages %}
      {% for message in messages %}
        <div class="mb-3 rounded-lg px-3 py-2 text-xs
                    {% if message.tags == 'error' %}
                      bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-100
                    {% else %}
                      bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-100
                    {% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <form method="post" class="password-form space-y-4">
      {% csrf_token %}
      {% if form.non_field_errors %}
        <div class="mb-2 rounded-md bg-red-50 px-3 py-2 text-[11px] text-red-700 dark:bg-red-900/30 dark:text-red-100">
          {% for err in form.non_field_errors %}
            <div>{{ err }}</div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Password lama -->
      <div>
        <label class="block text-xs font-medium text-slate-700 dark:text-slate-100 mb-1">
          Password lama
        </label>
        <div class="relative">
          <input
            type="password"
            id="old-password"
            name="{{ form.old_password.html_name }}"
            autocomplete="current-password"
            required
            class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 pr-9 text-sm text-slate-900 shadow-sm
                   focus:border-[var(--nav-link-color-active)] focus:outline-none focus:ring-2 focus:ring-[var(--nav-link-color-active)]/50
                   dark:border-slate-600 dark:bg-slate-900 dark:text-slate-50"
          />
          <button
            type="button"
            class="absolute inset-y-0 right-0 flex items-center pr-2 text-xs text-slate-400 hover:text-[var(--nav-link-color-active)] dark:text-slate-400"
            data-toggle-password="old-password"
            aria-label="Tampilkan/sembunyikan password"
          >
            <!-- mata normal -->
            <svg class="eye-open h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -1.274 4.057-5.065 7-9.542 7
                       -4.477 0-8.268-2.943-9.542-7z"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
            <!-- mata tersilang -->
            <svg class="eye-closed h-4 w-4 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M3 3l18 18M10.73 5.08A9.7 9.7 0 0 1 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -.57 1.82-1.64 3.41-3.06 4.61M6.53 6.53C4.55 7.8 3.14 9.73 2.46 12
                       a10.46 10.46 0 0 0 5.14 6.13"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
          </button>
        </div>
        {% if form.old_password.errors %}
          <p class="mt-1 text-[11px] text-red-500">
            {{ form.old_password.errors.0 }}
          </p>
        {% endif %}
      </div>

      <!-- Password baru -->
      <div>
        <label class="block text-xs font-medium text-slate-700 dark:text-slate-100 mb-1">
          Password baru
        </label>
        <div class="relative">
          <input
            type="password"
            id="new-password1"
            name="{{ form.new_password1.html_name }}"
            autocomplete="new-password"
            required
            class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 pr-9 text-sm text-slate-900 shadow-sm
                   focus:border-[var(--nav-link-color-active)] focus:outline-none focus:ring-2 focus:ring-[var(--nav-link-color-active)]/50
                   dark:border-slate-600 dark:bg-slate-900 dark:text-slate-50"
          />
          <button
            type="button"
            class="absolute inset-y-0 right-0 flex items-center pr-2 text-xs text-slate-400 hover:text-[var(--nav-link-color-active)] dark:text-slate-400"
            data-toggle-password="new-password1"
            aria-label="Tampilkan/sembunyikan password"
          >
            <svg class="eye-open h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -1.274 4.057-5.065 7-9.542 7
                       -4.477 0-8.268-2.943-9.542-7z"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
            <svg class="eye-closed h-4 w-4 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M3 3l18 18M10.73 5.08A9.7 9.7 0 0 1 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -.57 1.82-1.64 3.41-3.06 4.61M6.53 6.53C4.55 7.8 3.14 9.73 2.46 12
                       a10.46 10.46 0 0 0 5.14 6.13"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
          </button>
        </div>
        {% if form.new_password1.errors %}
          <p class="mt-1 text-[11px] text-red-500">
            {{ form.new_password1.errors.0 }}
          </p>
        {% endif %}
      </div>

      <!-- Konfirmasi password baru -->
      <div>
        <label class="block text-xs font-medium text-slate-700 dark:text-slate-100 mb-1">
          Konfirmasi password baru
        </label>
        <div class="relative">
          <input
            type="password"
            id="new-password2"
            name="{{ form.new_password2.html_name }}"
            autocomplete="new-password"
            required
            class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 pr-9 text-sm text-slate-900 shadow-sm
                   focus:border-[var(--nav-link-color-active)] focus:outline-none focus:ring-2 focus:ring-[var(--nav-link-color-active)]/50
                   dark:border-slate-600 dark:bg-slate-900 dark:text-slate-50"
          />
          <button
            type="button"
            class="absolute inset-y-0 right-0 flex items-center pr-2 text-xs text-slate-400 hover:text-[var(--nav-link-color-active)] dark:text-slate-400"
            data-toggle-password="new-password2"
            aria-label="Tampilkan/sembunyikan password"
          >
            <svg class="eye-open h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -1.274 4.057-5.065 7-9.542 7
                       -4.477 0-8.268-2.943-9.542-7z"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
            <svg class="eye-closed h-4 w-4 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-width="2"
                    d="M3 3l18 18M10.73 5.08A9.7 9.7 0 0 1 12 5
                       c4.477 0 8.268 2.943 9.542 7
                       -.57 1.82-1.64 3.41-3.06 4.61M6.53 6.53C4.55 7.8 3.14 9.73 2.46 12
                       a10.46 10.46 0 0 0 5.14 6.13"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
          </button>
        </div>
        {% if form.new_password2.errors %}
          <p class="mt-1 text-[11px] text-red-500">
            {{ form.new_password2.errors.0 }}
          </p>
        {% endif %}
      </div>

      <button
        type="submit"
        class="mt-2 w-full rounded-full bg-[var(--nav-link-color-active)] px-4 py-2 text-sm font-semibold text-[var(--primary-color)] shadow hover:bg-lime-300"
      >
        Simpan Password
      </button>
    </form>
  </div>
</div>
{% endblock %}
