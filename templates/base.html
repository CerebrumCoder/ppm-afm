<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}PPM Al-Faqih Mandiri{% endblock %}</title>

    <!-- Google Font: Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    >

    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              // sekarang font-sans = Plus Jakarta Sans
              sans: ['"Plus Jakarta Sans"', 'system-ui', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'sans-serif'],
            },
          },
        },
      };
    </script>

    <style>
      :root {
        --primary-color: #0c2000;
        --secondary-color: #f5f5f5;
        --nav-link-color-active: #A2D812;
        --nav-link-color-active-rgb: 162, 216, 18;
        --card-left-color: #83fe37;
        --card-right-color: #48b108;
        --dark-nav-link-color-active: #759b0e;
      }

      .dark {
        --secondary-color: #020617;
      }

      .navbar {
        background-color: var(--primary-color);
      }

      .nav-link {
        position: relative;
        transition: color 0.15s ease, background-color 0.15s ease;
      }

      .nav-link:hover {
        color: var(--nav-link-color-active);
      }

      .nav-link-active {
        color: var(--nav-link-color-active);
      }

      .dark .nav-link-active {
        color: var(--dark-nav-link-color-active);
      }

      .nav-link-active::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: -0.35rem;
        height: 3px;
        border-radius: 9999px;
        background: rgba(var(--nav-link-color-active-rgb), 1);
      }

      .dark .nav-link-active::after {
        background: var(--dark-nav-link-color-active);
      }
    </style>
</head>

<body class="font-sans bg-[var(--secondary-color)] text-slate-900 dark:bg-slate-900 dark:text-slate-50">
<header class="sticky top-0 z-50 shadow-md">
    {% include "nav.html" %}
</header>

<main class="min-h-screen">
  <div class="mx-auto max-w-6xl px-4 py-6">
    {% if messages %}
      <div class="mb-4 space-y-2">
        {% for message in messages %}
          <div class="rounded-lg border border-lime-300 bg-lime-50 px-4 py-2 text-sm text-lime-900 dark:border-lime-600 dark:bg-lime-900/20 dark:text-lime-100">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </div>
</main>

<!-- (opsional) footer global kamu bisa taruh di sini -->
{% include "footer.html" %}

<script>
  // Dark mode + persist di localStorage
  (function() {
    const root = document.documentElement;
    const storedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
      root.classList.add('dark');
    }

    function updateIcons() {
      const isDark = root.classList.contains('dark');
      const icon = document.getElementById('theme-toggle-icon');
      const iconMobile = document.getElementById('theme-toggle-icon-mobile');
      if (icon) icon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
      if (iconMobile) iconMobile.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    }

    function toggleTheme() {
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateIcons();
    }

    document.addEventListener('DOMContentLoaded', function () {
      const btn = document.getElementById('theme-toggle');
      const btnMobile = document.getElementById('theme-toggle-mobile');
      const mobileBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');

      if (btn) btn.addEventListener('click', toggleTheme);
      if (btnMobile) btnMobile.addEventListener('click', toggleTheme);
      if (mobileBtn && mobileMenu) {
        mobileBtn.addEventListener('click', function () {
          mobileMenu.classList.toggle('hidden');
        });
      }

      updateIcons();
    });
  })();
</script>
</body>
</html>
